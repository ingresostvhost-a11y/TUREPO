<body class="min-h-screen bg-[#0b0f1a] text-white">
  <!-- Header con logo -->
  <header class="w-full border-b border-white/10 bg-black/30 backdrop-blur">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center gap-3">
      <img src="/robot-ingresosai.png" alt="IngresosAI" width="40" height="40" style="border-radius:8px" />
      <strong style="font-size:1.1rem;letter-spacing:.3px;">IngresosAI</strong>
    </div>
  </header>

  <!-- Contenido -->
  <main class="max-w-3xl mx-auto px-4 py-8">
    <section id="waitroom"
      data-seconds="600"                 <!-- 10 min; ajusta si quieres -->
      data-redirect="/webinar.html">     <!-- destino al llegar a 0 -->
      <!-- Media principal -->
      <div style="border:1px solid rgba(255,255,255,.12);border-radius:16px;overflow:hidden;background:#0f1526">
        <video id="introVideo" width="100%" preload="metadata" poster="/thumbnail2.jpg" style="display:block">
          <source src="/Tu_Tambien_Puedes_Construir_Tu_Futuro.mp4" type="video/mp4" />
          Tu navegador no soporta video HTML5.
        </video>

        <!-- Botonera -->
        <div style="padding:16px;display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between">
          <div>
            <div style="opacity:.8;font-size:.9rem;margin-bottom:4px">El webinar inicia en</div>
            <div id="count" style="font-size:1.6rem;font-weight:700;letter-spacing:.5px">--:--</div>
          </div>

          <div style="display:flex;gap:10px;align-items:center">
            <button id="btnPlay"
              style="background:#ffd400;color:#1a1a1a;padding:12px 18px;border-radius:10px;font-weight:800;cursor:pointer;border:none">
              â–¶ Reproducir audio / video
            </button>
            <button id="btnSilence"
              style="background:transparent;color:#fff;padding:12px 18px;border-radius:10px;cursor:pointer;border:1px solid rgba(255,255,255,.3)">
              ðŸ”‡ Silenciar
            </button>
          </div>
        </div>
      </div>

      <!-- Fallback solo audio (por si prefieres audio en lugar de video) -->
      <audio id="introAudio" preload="metadata" style="display:none">
        <source src="/Tu_Tambien_Puedes_Construir_Tu_Futuro.mp4" type="audio/mp4" />
      </audio>
    </section>
  </main>

  <!-- Footer -->
  <footer class="w-full mt-10 border-t border-white/10 bg-black/30 backdrop-blur">
    <div class="max-w-5xl mx-auto px-4 py-6" style="display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap">
      <div style="display:flex;gap:10px;align-items:center">
        <img src="/robot-ingresosai.png" alt="IngresosAI" width="28" height="28" style="border-radius:6px" />
        <span style="opacity:.8;font-size:.9rem">Â© IngresosAI</span>
      </div>
      <img src="/thumbnail1.jpg" alt="PromociÃ³n" height="40" style="border-radius:8px;max-width:220px;object-fit:cover" />
    </div>
  </footer>

  <!-- JS: contador + reproducciÃ³n + redirecciÃ³n -->
  <script>
    (function () {
      const root  = document.getElementById('waitroom');
      const video = document.getElementById('introVideo');
      const audio = document.getElementById('introAudio'); // fallback
      const btnPlay = document.getElementById('btnPlay');
      const btnSilence = document.getElementById('btnSilence');
      const countEl = document.getElementById('count');

      const seconds  = parseInt(root.getAttribute('data-seconds') || '600', 10);
      const redirect = root.getAttribute('data-redirect') || '/';

      // Contador mm:ss
      let remaining = seconds;
      function fmt(n){ return String(n).padStart(2,'0'); }
      function tick() {
        const m = Math.floor(remaining / 60);
        const s = remaining % 60;
        countEl.textContent = `${fmt(m)}:${fmt(s)}`;
        if (remaining <= 0) {
          window.location.href = redirect;
          return;
        }
        remaining -= 1;
      }
      tick();
      setInterval(tick, 1000);

      // ReproducciÃ³n controlada por clic del usuario (evita bloqueos del navegador)
      let usingVideo = true; // por defecto usa el <video>
      btnPlay.addEventListener('click', async () => {
        try {
          if (usingVideo) {
            video.muted = false;        // activa sonido
            await video.play();
          } else {
            await audio.play();
          }
        } catch (e) {
          console.warn('ReproducciÃ³n bloqueada:', e);
          // Si falla el video, intenta con el audio
          usingVideo = false;
          try { await audio.play(); } catch(_) {}
        }
      });

      btnSilence.addEventListener('click', () => {
        if (usingVideo) {
          video.pause();
        } else {
          audio.pause();
        }
      });
    })();
  </script>
</body>
